spring.application.name=ticketing-gateway-service

server.port=8080


# Catalog Service Route
spring.cloud.gateway.server.webmvc.routes[0].id=catalog
spring.cloud.gateway.server.webmvc.routes[0].uri=http://localhost:8081
spring.cloud.gateway.server.webmvc.routes[0].predicates[0].name=Path
spring.cloud.gateway.server.webmvc.routes[0].predicates[0].args[pattern]=/api/catalog/**
spring.cloud.gateway.server.webmvc.routes[0].filters[0].name=StripPrefix
spring.cloud.gateway.server.webmvc.routes[0].filters[0].args[parts]=1

# Inventory Service Route
spring.cloud.gateway.server.webmvc.routes[1].id=inventory
spring.cloud.gateway.server.webmvc.routes[1].uri=http://localhost:8082
spring.cloud.gateway.server.webmvc.routes[1].predicates[0].name=Path
spring.cloud.gateway.server.webmvc.routes[1].predicates[0].args[pattern]=/api/inventory/**
spring.cloud.gateway.server.webmvc.routes[1].filters[0].name=StripPrefix
spring.cloud.gateway.server.webmvc.routes[1].filters[0].args[parts]=1

# Booking Service Route
spring.cloud.gateway.server.webmvc.routes[2].id=booking
spring.cloud.gateway.server.webmvc.routes[2].uri=http://localhost:8083
spring.cloud.gateway.server.webmvc.routes[2].predicates[0].name=Path
spring.cloud.gateway.server.webmvc.routes[2].predicates[0].args[pattern]=/api/booking/**
spring.cloud.gateway.server.webmvc.routes[2].filters[0].name=StripPrefix
spring.cloud.gateway.server.webmvc.routes[2].filters[0].args[parts]=1

spring.cloud.gateway.routes[2].id=booking
spring.cloud.gateway.routes[2].uri=http://localhost:8083
spring.cloud.gateway.routes[2].predicates[0]=Path=/api/booking/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1

# Actuator
management.endpoints.web.exposure.include=health,info

# Timeouts to avoid hanging requests if a backend is slow
spring.cloud.gateway.httpclient.connect-timeout=2000       # 2 seconds to connect
spring.cloud.gateway.httpclient.response-timeout=5s        # 5 seconds total per request

# Remove cookies from incoming requests before forwarding
spring.cloud.gateway.default-filters[0]=RemoveRequestHeader=Cookie

# Deduplicate some CORS headers (safe to keep)
spring.cloud.gateway.default-filters[1]=DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin RETAIN_FIRST
